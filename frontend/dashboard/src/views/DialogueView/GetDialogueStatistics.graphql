query GetDialogueStatistics(
  $customerSlug: String!, 
  $dialogueSlug: String!, 
  $prevDateFilter: DialogueFilterInputType, 
  $statisticsDateFilter: DialogueFilterInputType,
  $startDateTime: String!,
  $endDateTime: String,
  $issueFilter: IssueFilterInput
  ) {
  customer(slug: $customerSlug) {
    id
    dialogue(where: { slug: $dialogueSlug }) {
      id
      title
      thisWeekAverageScore: averageScore(input: $statisticsDateFilter)
      previousScore: averageScore(input: $prevDateFilter)
      statistics(input: $statisticsDateFilter) {
        nrInteractions
        topPositivePath {
          answer
          quantity
          basicSentiment
        }

        mostPopularPath {
          answer
          quantity
          basicSentiment
        }

        topNegativePath {
          quantity
          answer
          basicSentiment
        }

        history {
          x
          y
        }
      }
      sessions(take: 3) {
        id
        createdAt
        mainScore
        nodeEntries {
          relatedNode {
            title
            type
          }
          value {
            sliderNodeEntry
            textboxNodeEntry
            registrationNodeEntry
            choiceNodeEntry
            linkNodeEntry
          }
        }
      }
      issues(filter: $issueFilter) {
        id
        topic
        rankScore
        followUpAction
        actionRequiredCount
        dialogue {
          id
          title
        }
        basicStats {
          responseCount
          average
        }
        history {
          id
          items {
            id
            date
            frequency
          }
        }
		  }
      dialogueStatisticsSummary (input: { startDateTime: $startDateTime, endDateTime: $endDateTime, impactType: AVERAGE, refresh: true 
			}) {
				id
				nrVotes
				impactScore
				updatedAt
        title
				dialogue {
					title
					id
				}
			}
    }
  }
}
