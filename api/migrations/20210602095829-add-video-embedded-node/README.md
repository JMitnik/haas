# Migration `20210602095829-add-video-embedded-node`

This migration has been generated by Cold-A-Muse at 6/2/2021, 4:58:29 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."QuestionNode" DROP COLUMN "extraContent",
ADD COLUMN "videoEmbeddedNodeId" text   

CREATE TABLE "public"."VideoEmbeddedNode" (
"id" text   NOT NULL ,
"videoUrl" text   ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."QuestionNode" ADD FOREIGN KEY ("videoEmbeddedNodeId")REFERENCES "public"."VideoEmbeddedNode"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210525034544-add-types-for-video-embedding-question-type..20210602095829-add-video-embedded-node
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 // binaryTargets = ["debian-openssl-1.1.x"]
 generator client {
@@ -193,8 +193,14 @@
   earlyReleaseText String?
 }
+model VideoEmbeddedNode {
+  id           String         @id @default(cuid())
+  videoUrl     String?
+  QuestionNode QuestionNode[]
+}
+
 model QuestionNode {
   id           String           @id @default(cuid())
   creationDate DateTime         @default(now())
   updatedAt    DateTime         @updatedAt
@@ -223,19 +229,19 @@
   QuestionOption   QuestionOption[] @relation("QuestionNodeOptions")
   triggers         Trigger[]
   overridesChoices QuestionOption[] @relation("ChoiceCTANode")
-  extraContent     String?
-
   // Node-types
-  share      Share?
-  sliderNode SliderNode? @relation(fields: [sliderNodeId], references: [id])
-  form       FormNode?   @relation(fields: [formNodeId], references: [id])
+  share             Share?
+  videoEmbeddedNode VideoEmbeddedNode? @relation(fields: [videoEmbeddedNodeId], references: [id])
+  sliderNode        SliderNode?        @relation(fields: [sliderNodeId], references: [id])
+  form              FormNode?          @relation(fields: [formNodeId], references: [id])
-  links             Link[]
-  QuestionOfTrigger QuestionOfTrigger[]
-  sliderNodeId      String?
-  formNodeId        String?
+  links               Link[]
+  QuestionOfTrigger   QuestionOfTrigger[]
+  videoEmbeddedNodeId String?
+  sliderNodeId        String?
+  formNodeId          String?
 }
 enum LinkTypeEnum {
   SOCIAL
```


