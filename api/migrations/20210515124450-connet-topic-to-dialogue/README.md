# Migration `20210515124450-connet-topic-to-dialogue`

This migration has been generated by Jonathan at 5/15/2021, 2:44:50 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Topic" ADD COLUMN "relatedDialogueId" text   NOT NULL 

ALTER TABLE "public"."Topic" ADD FOREIGN KEY ("relatedDialogueId")REFERENCES "public"."Dialogue"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210508191616-create-topic..20210515124450-connet-topic-to-dialogue
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 // binaryTargets = ["debian-openssl-1.1.x"]
 generator client {
@@ -99,8 +99,11 @@
   endScreenText String?
   wasGeneratedWithGenData Boolean           @default(value: false)
   CampaignVariant         CampaignVariant[]
+
+  topics  Topic[]
+
   @@unique([slug, customerId])
 }
 enum NodeType {
@@ -323,8 +326,11 @@
   label String
   values  TopicValue[]
   relatedQuestions  QuestionNode[]
+
+  relatedDialogueId String
+  relatedDialogue Dialogue  @relation(fields: [relatedDialogueId], references: [id])
 }
 model TopicValue {
   id  String  @id @default(cuid())
```


