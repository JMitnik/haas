# Migration `20200605091337-added-customer-to-role-relation`

This migration has been generated by Cold-A-Muse at 6/5/2020, 9:13:37 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Role" ADD COLUMN "customerId" text   ;

ALTER TABLE "public"."Role" ADD FOREIGN KEY ("customerId")REFERENCES "public"."Customer"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200604160400-made-email-field-unique-in-db..20200605091337-added-customer-to-role-relation
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url      = env("DB_STRING")
 }
 // binaryTargets = ["debian-openssl-1.1.x"]
 generator client {
@@ -54,8 +54,9 @@
   name      String
   settings  CustomerSettings?
   dialogues Dialogue[]
   users     User[]
+  roles     Role[]
 }
 model Dialogue {
   creationDate DateTime       @default(now())
@@ -175,15 +176,17 @@
   id          String       @default(cuid()) @id
   name        String
   permissions Permission[]
   User        User[]
+  Customer    Customer?    @relation(fields: [customerId], references: [id])
+  customerId  String?
 }
 model User {
   id         String    @default(cuid()) @id
   createdAt  DateTime  @default(now())
-  updatedAt  DateTime?  @updatedAt
-  email      String     @unique
+  updatedAt  DateTime? @updatedAt
+  email      String    @unique
   phone      String?
   firstName  String?
   lastName   String?
   roleId     String
```


