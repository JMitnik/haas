# Migration `20200605111212-re-added-role-id-field-on-permission`

This migration has been generated by Cold-A-Muse at 6/5/2020, 11:12:12 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Permission" ADD COLUMN "roleId" text   ;

ALTER TABLE "public"."Permission" ADD FOREIGN KEY ("roleId")REFERENCES "public"."Role"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200605110548-added-customer-permissions-n-m-relation..20200605111212-re-added-role-id-field-on-permission
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url      = env("DB_STRING")
 }
 // binaryTargets = ["debian-openssl-1.1.x"]
 generator client {
@@ -168,9 +168,10 @@
 model Permission {
   id          String    @default(cuid()) @id
   name        String
   description String?
-  Role        Role[]    @relation(references: [id])
+  roleId      String?
+  Role        Role[]    @relation(fields: [roleId], references: [id])
   Customer    Customer? @relation(fields: [customerId], references: [id])
   customerId  String?
 }
```


