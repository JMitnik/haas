# Migration `20210630083542-post-leaf-node`

This migration has been generated by Daan at 6/30/2021, 10:35:42 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Dialogue" ADD COLUMN "postLeafNodeId" text   

CREATE TABLE "public"."PostLeafNode" (
"id" text   NOT NULL ,
"header" text   NOT NULL ,
"subtext" text   NOT NULL ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."Dialogue" ADD FOREIGN KEY ("postLeafNodeId")REFERENCES "public"."PostLeafNode"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210629083656-add-slider-range-extremes-text..20210630083542-post-leaf-node
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 // binaryTargets = ["debian-openssl-1.1.x"]
 generator client {
@@ -78,25 +78,36 @@
   customer   Customer   @relation(fields: [customerId], references: [id])
   customerId String
 }
+model PostLeafNode {
+  id      String @id @default(cuid())
+  header  String
+  subtext String
+
+  Dialogue Dialogue[]
+}
+
 model Dialogue {
-  id               String         @id @default(cuid())
-  title            String
-  slug             String
-  description      String
-  creationDate     DateTime       @default(now())
-  updatedAt        DateTime?      @updatedAt
-  publicTitle      String?
-  customerId       String
-  customer         Customer       @relation(fields: [customerId], references: [id])
-  edges            Edge[]
-  questions        QuestionNode[]
-  sessions         Session[]
-  tags             Tag[]
-  isOnline         Boolean        @default(value: false)
-  isWithoutGenData Boolean        @default(value: false)
+  id             String         @id @default(cuid())
+  title          String
+  slug           String
+  description    String
+  creationDate   DateTime       @default(now())
+  updatedAt      DateTime?      @updatedAt
+  publicTitle    String?
+  customerId     String
+  postLeafNodeId String?
+  customer       Customer       @relation(fields: [customerId], references: [id])
+  edges          Edge[]
+  questions      QuestionNode[]
+  sessions       Session[]
+  tags           Tag[]
+  postLeafNode   PostLeafNode?  @relation(fields: [postLeafNodeId], references: [id])
+  isOnline         Boolean @default(value: false)
+  isWithoutGenData Boolean @default(value: false)
+
   endScreenText String?
   wasGeneratedWithGenData Boolean           @default(value: false)
   CampaignVariant         CampaignVariant[]
@@ -186,13 +197,13 @@
   sliderNodeRangeId String
 }
 model SliderNode {
-  id           String             @id @default(cuid())
-  markers      SliderNodeMarker[]
-  QuestionNode QuestionNode[]
-  unhappyText String?
-  happyText String?
+  id               String             @id @default(cuid())
+  markers          SliderNodeMarker[]
+  QuestionNode     QuestionNode[]
+  unhappyText      String?
+  happyText        String?
   earlyReleaseText String?
 }
 model VideoEmbeddedNode {
```


