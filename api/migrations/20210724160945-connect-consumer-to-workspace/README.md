# Migration `20210724160945-connect-consumer-to-workspace`

This migration has been generated by Jonathan at 7/24/2021, 6:09:45 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Consumer" ADD COLUMN "workspaceId" text   NOT NULL 

ALTER TABLE "public"."Consumer" ADD FOREIGN KEY ("workspaceId")REFERENCES "public"."Customer"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210724155149-create-subscription-model..20210724160945-connect-consumer-to-workspace
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 // binaryTargets = ["debian-openssl-1.1.x"]
 generator client {
@@ -62,8 +62,10 @@
   triggers        Trigger[]
   tags            Tag[]
   campaigns       Campaign[]
   CampaignVariant CampaignVariant[]
+
+  consumers Consumer[]
 }
 enum TagEnum {
   DEFAULT
@@ -776,8 +778,11 @@
   // For properties related to external connections
   externalId  String?
   externalSource  String?
+  workspaceId String
+  workspace Customer @relation(fields: [workspaceId], references: [id])
+
   // State related properties
   isDisabled  Boolean @default(false)
   subscriptions ConsumerSubscription[]
```


