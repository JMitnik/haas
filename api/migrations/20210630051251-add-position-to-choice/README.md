# Migration `20210630051251-add-position-to-choice`

This migration has been generated by Jonathan at 6/30/2021, 7:12:51 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."CampaignVariantEdge" DROP CONSTRAINT "CampaignVariantEdge_campaignId_fkey"

ALTER TABLE "public"."CampaignVariantEdge" DROP CONSTRAINT "CampaignVariantEdge_childCampaignVariantId_fkey"

ALTER TABLE "public"."CampaignVariantEdge" DROP CONSTRAINT "CampaignVariantEdge_directCampaignId_fkey"

ALTER TABLE "public"."CampaignVariantEdge" DROP CONSTRAINT "CampaignVariantEdge_parentCampaignVariantId_fkey"

ALTER TABLE "public"."CampaignVariantEdgeCondition" DROP CONSTRAINT "CampaignVariantEdgeCondition_campaignVariantEdgeId_fkey"

ALTER TABLE "public"."CampaignVariantSubscription" DROP CONSTRAINT "CampaignVariantSubscription_campaignVariantEdgeId_fkey"

ALTER TABLE "public"."CampaignVariantSubscription" DROP CONSTRAINT "CampaignVariantSubscription_consumerId_fkey"

ALTER TABLE "public"."CampaignVariantSubscription" DROP CONSTRAINT "CampaignVariantSubscription_rootCampaignVariantId_fkey"

ALTER TABLE "public"."CampaignVariantSubscription" DROP CONSTRAINT "CampaignVariantSubscription_userId_fkey"

ALTER TABLE "public"."CampaignVariant" DROP CONSTRAINT "CampaignVariant_campaignId_fkey"

ALTER TABLE "public"."Delivery" DROP CONSTRAINT "Delivery_relatedSubscriptionId_fkey"

ALTER TABLE "public"."Session" DROP CONSTRAINT "Session_consumerId_fkey"

ALTER TABLE "public"."CampaignVariant" DROP COLUMN "campaignId",
DROP COLUMN "depth"

ALTER TABLE "public"."Delivery" DROP COLUMN "relatedSubscriptionId",
DROP COLUMN "message",
DROP COLUMN "errorMessage"

ALTER TABLE "public"."QuestionOption" ADD COLUMN "position" integer   

ALTER TABLE "public"."Session" DROP COLUMN "consumerId"

DROP TYPE "CampaignScheduleMetric"

DROP TYPE "CampaignVariantEdgeConditionEnum"

DROP TYPE "CampaignVariantScheduleTypeEnum"

DROP TABLE "public"."CampaignVariantEdge"

DROP TABLE "public"."CampaignVariantEdgeCondition"

DROP TABLE "public"."CampaignVariantSubscription"

DROP TABLE "public"."Consumer"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210603185651-prisma-refresh..20210630051251-add-position-to-choice
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 // binaryTargets = ["debian-openssl-1.1.x"]
 generator client {
@@ -318,8 +318,10 @@
   question   QuestionNode? @relation("QuestionNodeOptions", fields: [questionId], references: [id])
   questionNodeId String?
   QuestionNode   QuestionNode? @relation(fields: [questionNodeId], references: [id])
+
+  position  Int?
 }
 model Session {
   createdAt   DateTime    @default(now())
```


