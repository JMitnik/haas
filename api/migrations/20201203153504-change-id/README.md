# Migration `20201203153504-change-id`

This migration has been generated by Jonathan at 12/3/2020, 4:35:04 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."QuestionNode" DROP CONSTRAINT "QuestionNode_sliderNodeId_fkey"

ALTER TABLE "public"."SliderNodeMarker" DROP CONSTRAINT "SliderNodeMarker_sliderNodeId_fkey"

ALTER TABLE "public"."SliderNodeMarker" DROP CONSTRAINT "SliderNodeMarker_sliderNodeRangeId_fkey"

ALTER TABLE "public"."QuestionNode" ALTER COLUMN "sliderNodeId" SET DATA TYPE text 

ALTER TABLE "public"."SliderNode" DROP CONSTRAINT "SliderNode_pkey",
ALTER COLUMN "id" SET DATA TYPE text ,
ALTER COLUMN "id" DROP DEFAULT,
ADD PRIMARY KEY ("id");
DROP SEQUENCE "SliderNode_id_seq"

ALTER TABLE "public"."SliderNodeMarker" DROP CONSTRAINT "SliderNodeMarker_pkey",
ALTER COLUMN "id" SET DATA TYPE text ,
ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "sliderNodeRangeId" SET DATA TYPE text ,
ALTER COLUMN "sliderNodeId" SET DATA TYPE text ,
ADD PRIMARY KEY ("id");
DROP SEQUENCE "SliderNodeMarker_id_seq"

ALTER TABLE "public"."SliderNodeRange" DROP CONSTRAINT "SliderNodeRange_pkey",
ALTER COLUMN "id" SET DATA TYPE text ,
ALTER COLUMN "id" DROP DEFAULT,
ADD PRIMARY KEY ("id");
DROP SEQUENCE "SliderNodeRange_id_seq"

ALTER TABLE "public"."QuestionNode" ADD FOREIGN KEY ("sliderNodeId")REFERENCES "public"."SliderNode"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."SliderNodeMarker" ADD FOREIGN KEY ("sliderNodeRangeId")REFERENCES "public"."SliderNodeRange"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."SliderNodeMarker" ADD FOREIGN KEY ("sliderNodeId")REFERENCES "public"."SliderNode"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201203151120-markers-to-float..20201203153504-change-id
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 // binaryTargets = ["debian-openssl-1.1.x"]
 generator client {
@@ -109,24 +109,24 @@
   SHARE
 }
 model SliderNodeRange {
-  id        Int          @id @default(autoincrement())
+  id        String          @id @default(cuid())
   start     Float?
   end       Float?
 }
 model SliderNodeMarker {
-  id        Int          @id @default(autoincrement())
+  id        String          @id @default(cuid())
   range     SliderNodeRange
   label     String
   subLabel  String
-  sliderNodeId  Int
+  sliderNodeId  String
   sliderNode    SliderNode  @relation(fields: [sliderNodeId], references: [id])
 }
 model SliderNode {
-  id        Int          @id @default(autoincrement())
+  id        String          @id @default(cuid())
   markers SliderNodeMarker[]
 }
 model QuestionNode {
```


