# Migration `20200422100415-added-customer-settings`

This migration has been generated by Cold-A-Muse at 4/22/2020, 10:04:15 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."CustomerSettings" (
    "colourSettings" integer   ,
    "fontSettings" integer   ,
    "id" SERIAL,
    "logoUrl" text   ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."ColourSettings" (
    "dark" text   ,
    "darkest" text   ,
    "error" text   ,
    "id" SERIAL,
    "light" text   ,
    "lightest" text   ,
    "muted" text   ,
    "normal" text   ,
    "primary" text  NOT NULL ,
    "primaryAlt" text   ,
    "secondary" text   ,
    "success" text   ,
    "tertiary" text   ,
    "text" text   ,
    "warning" text   ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."FontSettings" (
    "body" text   ,
    "fontTitle" text   ,
    "id" SERIAL,
    "settingTitle" text   ,
    "special" text   ,
    PRIMARY KEY ("id")
) 

ALTER TABLE "public"."Customer" ;

CREATE UNIQUE INDEX "CustomerSettings_colourSettings" ON "public"."CustomerSettings"("colourSettings")

CREATE UNIQUE INDEX "CustomerSettings_fontSettings" ON "public"."CustomerSettings"("fontSettings")

CREATE UNIQUE INDEX "Customer_settings" ON "public"."Customer"("settings")

ALTER TABLE "public"."CustomerSettings" ADD FOREIGN KEY ("colourSettings")REFERENCES "public"."ColourSettings"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."CustomerSettings" ADD FOREIGN KEY ("fontSettings")REFERENCES "public"."FontSettings"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."Customer" ADD FOREIGN KEY ("settings")REFERENCES "public"."CustomerSettings"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200422100145-prisma2-init..20200422100415-added-customer-settings
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url      = env("DB_STRING")
 }
 generator client {
   provider = "prisma-client-js"
@@ -11,11 +11,49 @@
   id               String            @default(cuid()) @id
   name             String
   settingsId       Int?              @map("settings")
   dialogues        Dialogue[]
-  // settings         CustomerSettings? @relation(fields: [settingsId], references: [id])
+  settings         CustomerSettings? @relation(fields: [settingsId], references: [id])
 }
+model CustomerSettings {
+  colourSettingsId Int?         @map("colourSettings")
+  fontSettingsId   Int?         @map("fontSettings")
+  id             Int          @default(autoincrement()) @id
+  logoUrl        String?
+  colourSettings ColourSettings? @relation(fields: [colourSettingsId], references: [id])
+  fontSettings   FontSettings?   @relation(fields: [fontSettingsId], references: [id])
+  customer       Customer
+}
+
+model ColourSettings {
+  dark             String?
+  darkest          String?
+  error            String?
+  id               Int             @default(autoincrement()) @id
+  light            String?
+  lightest         String?
+  muted            String?
+  normal           String?
+  primary          String
+  primaryAlt       String?
+  secondary        String?
+  success          String?
+  tertiary         String?
+  text             String?
+  warning          String?
+  customerSettings CustomerSettings
+}
+
+model FontSettings {
+  body             String?
+  fontTitle        String?
+  id               Int             @default(autoincrement()) @id
+  settingTitle     String?
+  special          String?
+  CustomerSettings CustomerSettings
+}
+
 model Dialogue {
   creationDate DateTime       @default(now())
   updatedAt    DateTime?      @updatedAt
   description  String
```


