# Migration `20200928173755-added-question-node`

This migration has been generated by Cold-A-Muse at 9/28/2020, 5:37:55 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql

```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200928164443-added-share-node-type..20200928173755-added-question-node
--- datamodel.dml
+++ datamodel.dml
@@ -1,14 +1,14 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 // binaryTargets = ["debian-openssl-1.1.x"]
 generator client {
-  provider = "prisma-client-js"
+  provider        = "prisma-client-js"
   previewFeatures = ["middlewares", "transactionApi"]
-  output   = "./node_modules/@prisma/client"
+  output          = "./node_modules/@prisma/client"
 }
 model ColourSettings {
   dark             String?
@@ -72,9 +72,9 @@
   id         String     @default(cuid()) @id
   type       TagEnum    @default(value: DEFAULT)
   name       String
   isTagOf    Dialogue[] @relation(references: [id])
-  customer   Customer  @relation(fields: [customerId], references: [id])
+  customer   Customer   @relation(fields: [customerId], references: [id])
   customerId String
 }
 model Dialogue {
@@ -105,38 +105,38 @@
   SHARE
 }
 model QuestionNode {
-  id                         String           @default(cuid()) @id
-  creationDate               DateTime         @default(now())
-  updatedAt                  DateTime         @updatedAt
-  isLeaf                     Boolean          @default(false)
-  isRoot                     Boolean          @default(false)
-  title                      String
-  type                       NodeType         @default(value: GENERIC)
-  options                    QuestionOption[]
-  children                   Edge[]
+  id           String           @default(cuid()) @id
+  creationDate DateTime         @default(now())
+  updatedAt    DateTime         @updatedAt
+  isLeaf       Boolean          @default(false)
+  isRoot       Boolean          @default(false)
+  title        String
+  type         NodeType         @default(value: GENERIC)
+  options      QuestionOption[]
+  children     Edge[]
-  overrideLeafId             String?
-  overrideLeaf               QuestionNode?    @relation("QNodeToOverrideLeaf", fields: [overrideLeafId], references: [id])
-  isOverrideLeafOf           QuestionNode[]   @relation("QNodeToOverrideLeaf")
-  
-  questionDialogue           Dialogue?        @relation(fields: [questionDialogueId], references: [id])
-  questionDialogueId         String?
-  
-  isChildNodeOf              Edge[]           @relation("Edge_childNodeToQuestionNode")
-  isParentNodeOf             Edge[]           @relation("Edge_parentNodeToQuestionNode")
+  overrideLeafId   String?
+  overrideLeaf     QuestionNode?  @relation("QNodeToOverrideLeaf", fields: [overrideLeafId], references: [id])
+  isOverrideLeafOf QuestionNode[] @relation("QNodeToOverrideLeaf")
+
+  questionDialogue   Dialogue? @relation(fields: [questionDialogueId], references: [id])
+  questionDialogueId String?
+
+  isChildNodeOf              Edge[]      @relation("Edge_childNodeToQuestionNode")
+  isParentNodeOf             Edge[]      @relation("Edge_parentNodeToQuestionNode")
   isRelatedNodeOfNodeEntries NodeEntry[]
-  
-  edgeId                     String?
-  Edge                       Edge?            @relation("EdgeChildrenRelation", fields: [edgeId], references: [id])
-  
-  QuestionOption             QuestionOption[] @relation("QuestionNodeOptions")
-  triggers                   Trigger[]
-  share                      Share?
+  edgeId String?
+  Edge   Edge?   @relation("EdgeChildrenRelation", fields: [edgeId], references: [id])
-  links                      Link[]
+  QuestionOption QuestionOption[] @relation("QuestionNodeOptions")
+  triggers       Trigger[]
+
+  share Share?
+
+  links Link[]
 }
 enum LinkTypeEnum {
   SOCIAL
@@ -148,18 +148,18 @@
   TWITTER
 }
 model Share {
-  id  String @default(cuid()) @id
+  id        String   @default(cuid()) @id
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
-  url String
-  title String
+  url     String
+  title   String
   tooltip String?
-  questionNode    QuestionNode? @relation(fields: [questionNodeId], references: [id])
-  questionNodeId  String?
+  questionNode   QuestionNode? @relation(fields: [questionNodeId], references: [id])
+  questionNodeId String?
 }
 model Link {
   id              String        @default(cuid()) @id
@@ -221,68 +221,68 @@
 // Node-entry types
 model NodeEntry {
-  id            String           @default(cuid()) @id
-  creationDate  DateTime         @default(now())
+  id            String        @default(cuid()) @id
+  creationDate  DateTime      @default(now())
   depth         Int?
   relatedEdgeId String?
   relatedNodeId String?
   sessionId     String?
-  session       Session?         @relation(fields: [sessionId], references: [id])
-  relatedNode   QuestionNode?    @relation(fields: [relatedNodeId], references: [id])
-  relatedEdge   Edge?            @relation(fields: [relatedEdgeId], references: [id])
-  
+  session       Session?      @relation(fields: [sessionId], references: [id])
+  relatedNode   QuestionNode? @relation(fields: [relatedNodeId], references: [id])
+  relatedEdge   Edge?         @relation(fields: [relatedEdgeId], references: [id])
+
   // Entry types
-  sliderNodeEntry SliderNodeEntry?
-  choiceNodeEntry ChoiceNodeEntry?
-  textboxNodeEntry TextboxNodeEntry?
+  sliderNodeEntry       SliderNodeEntry?
+  choiceNodeEntry       ChoiceNodeEntry?
+  textboxNodeEntry      TextboxNodeEntry?
   registrationNodeEntry RegistrationNodeEntry?
-  linkNodeEntry LinkNodeEntry?
+  linkNodeEntry         LinkNodeEntry?
 }
 model LinkNodeEntry {
-  id  Int  @default(autoincrement()) @id
-  value Json?
+  id          Int       @default(autoincrement()) @id
+  value       Json?
   nodeEntryId String
-  nodeEntry NodeEntry @relation(references: [id], fields: [nodeEntryId])
+  nodeEntry   NodeEntry @relation(references: [id], fields: [nodeEntryId])
 }
 model SliderNodeEntry {
-  id  Int  @default(autoincrement()) @id
-  value Int?
+  id          Int       @default(autoincrement()) @id
+  value       Int?
   nodeEntryId String
-  nodeEntry NodeEntry @relation(references: [id], fields: [nodeEntryId])
+  nodeEntry   NodeEntry @relation(references: [id], fields: [nodeEntryId])
 }
 model ChoiceNodeEntry {
-  id  Int  @default(autoincrement()) @id
-  value String?
+  id          Int       @default(autoincrement()) @id
+  value       String?
   nodeEntryId String
-  nodeEntry NodeEntry @relation(references: [id], fields: [nodeEntryId])
+  nodeEntry   NodeEntry @relation(references: [id], fields: [nodeEntryId])
 }
 model TextboxNodeEntry {
-  id  Int  @default(autoincrement()) @id
-  value String?
+  id          Int       @default(autoincrement()) @id
+  value       String?
   nodeEntryId String
-  nodeEntry NodeEntry @relation(references: [id], fields: [nodeEntryId])
+  nodeEntry   NodeEntry @relation(references: [id], fields: [nodeEntryId])
 }
 model RegistrationNodeEntry {
-  id  Int  @default(autoincrement()) @id
-  value Json?
+  id          Int       @default(autoincrement()) @id
+  value       Json?
   nodeEntryId String
-  nodeEntry NodeEntry @relation(references: [id], fields: [nodeEntryId])
+  nodeEntry   NodeEntry @relation(references: [id], fields: [nodeEntryId])
 }
 // Permissions
 model Permission {
-  id                 String    @default(cuid()) @id
-  name               String
-  description        String?
-  Customer           Customer? @relation(fields: [customerId], references: [id])
-  customerId         String?
+  id          String    @default(cuid()) @id
+  name        String
+  description String?
+  Customer    Customer? @relation(fields: [customerId], references: [id])
+  customerId  String?
 }
 enum SystemPermissionEnum {
   CAN_ACCESS_ADMIN_PANEL
@@ -309,46 +309,48 @@
   CUSTOM
 }
 model Role {
-  id          String       @default(cuid()) @id
+  id          String                 @default(cuid()) @id
   name        String
-  type        RoleTypeEnum  @default(value: USER)
-  isPrivate   Boolean       @default(false)
+  type        RoleTypeEnum           @default(value: USER)
+  isPrivate   Boolean                @default(false)
   permissions SystemPermissionEnum[]
   users       UserOfCustomer[]
   @@unique([id, name])
+  Customer   Customer? @relation(fields: [customerId], references: [id])
+  customerId String?
 }
 model User {
-  id         String    @default(cuid()) @id
-  createdAt  DateTime  @default(now())
-  updatedAt  DateTime? @updatedAt
-  email      String    @unique
-  password   String?
-  phone      String?
-  firstName  String?
-  lastName   String?
-  triggers   Trigger[]
-  customers  UserOfCustomer[]
-  globalPermissions SystemPermissionEnum[]
-  loginToken  String?
-  loginTokenExpiry DateTime?
-  refreshToken  String? 
-  refreshTokenExpiry  DateTime? 
-  lastActivity DateTime?
+  id                 String                 @default(cuid()) @id
+  createdAt          DateTime               @default(now())
+  updatedAt          DateTime?              @updatedAt
+  email              String                 @unique
+  password           String?
+  phone              String?
+  firstName          String?
+  lastName           String?
+  triggers           Trigger[]
+  customers          UserOfCustomer[]
+  globalPermissions  SystemPermissionEnum[]
+  loginToken         String?
+  loginTokenExpiry   DateTime?
+  refreshToken       String?
+  refreshTokenExpiry DateTime?
+  lastActivity       DateTime?
 }
 model UserOfCustomer {
-  userId  String
-  user    User    @relation(fields: [userId], references: [id])
+  userId String
+  user   User   @relation(fields: [userId], references: [id])
   customerId String
-  customer  Customer  @relation(fields: [customerId], references: [id])
+  customer   Customer @relation(fields: [customerId], references: [id])
-  roleId  String
-  role    Role  @relation(fields: [roleId], references: [id])
-  
+  roleId String
+  role   Role   @relation(fields: [roleId], references: [id])
+
   createdAt DateTime @default(now())
   @@id([userId, customerId])
 }
@@ -377,17 +379,17 @@
   type      TriggerConditionEnum @default(value: LOW_THRESHOLD)
   minValue  Int?
   maxValue  Int?
   textValue String?
-  trigger   Trigger             @relation(fields: [triggerId], references: [id])
+  trigger   Trigger              @relation(fields: [triggerId], references: [id])
   triggerId String
 }
 model Trigger {
   id            String             @default(cuid()) @id
   lastSent      DateTime?
   name          String
-  type          TriggerEnum         @default(value: QUESTION)
+  type          TriggerEnum        @default(value: QUESTION)
   medium        TriggerMedium
   conditions    TriggerCondition[]
   relatedNodeId String?
   relatedNode   QuestionNode?      @relation(fields: [relatedNodeId], references: [id])
```


