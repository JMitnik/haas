# Migration `20201231141638-add-workspace-to-campaign`

This migration has been generated by Jonathan at 12/31/2020, 3:16:38 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Campaign" ADD COLUMN "workspaceId" text   NOT NULL 

ALTER TABLE "public"."CampaignVariantToCampaign" DROP COLUMN "weight",
ADD COLUMN "weight" integer   NOT NULL 

ALTER TABLE "public"."Campaign" ADD FOREIGN KEY ("workspaceId")REFERENCES "public"."Customer"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201228142753-delivery-added-props..20201231141638-add-workspace-to-campaign
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 // binaryTargets = ["debian-openssl-1.1.x"]
 generator client {
@@ -59,8 +59,9 @@
   roles       Role[]
   permissions Permission[]
   triggers    Trigger[]
   tags        Tag[]
+  campaigns   Campaign[]
 }
 enum TagEnum {
   DEFAULT
@@ -514,8 +515,11 @@
   id  String  @id @default(cuid())
   label       String
   deliveries  Delivery[]
   variantsEdges    CampaignVariantToCampaign[]
+  
+  workspaceId String   
+  workspace   Customer @relation(fields: [workspaceId], references: [id])
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
 }
@@ -527,9 +531,9 @@
   campaignVariantId String
   campaignVariant CampaignVariant @relation(fields: [campaignVariantId], references: [id])
   // Weight decides in A/B testing which 
-  weight  Float
+  weight  Int
   @@id([campaignId, campaignVariantId])
 }
```


