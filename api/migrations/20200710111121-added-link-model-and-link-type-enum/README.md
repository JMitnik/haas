# Migration `20200710111121-added-link-model-and-link-type-enum`

This migration has been generated by Cold-A-Muse at 7/10/2020, 11:11:22 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "LinkTypeEnum" AS ENUM ('SOCIAL', 'API');

CREATE TABLE "public"."Link" (
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"icon" text   ,"id" text  NOT NULL ,"questionNodeId" text   ,"title" text  NOT NULL ,"updatedAt" timestamp(3)   ,"url" text  NOT NULL ,
    PRIMARY KEY ("id"))

ALTER TABLE "public"."Link" ADD FOREIGN KEY ("questionNodeId")REFERENCES "public"."QuestionNode"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200707143022-customer-id---email-unique-field..20200710111121-added-link-model-and-link-type-enum
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 // binaryTargets = ["debian-openssl-1.1.x"]
 generator client {
@@ -113,10 +113,27 @@
   edgeId                     String?
   Edge                       Edge?            @relation("EdgeChildrenRelation", fields: [edgeId], references: [id])
   QuestionOption             QuestionOption[] @relation("QuestionNodeOptions")
   triggers                   Trigger[]
+  links                      Link[]
 }
+enum LinkTypeEnum {
+  SOCIAL
+  API
+}
+
+model Link {
+  id             String        @default(cuid()) @id
+  createdAt      DateTime      @default(now())
+  updatedAt      DateTime?     @updatedAt
+  title          String
+  url            String
+  icon           String?
+  QuestionNode   QuestionNode? @relation(fields: [questionNodeId], references: [id])
+  questionNodeId String?
+}
+
 model Edge {
   childNodeId                String
   createdAt                  DateTime            @default(now())
   updatedAt                  DateTime            @updatedAt
@@ -208,9 +225,9 @@
 model User {
   id         String    @default(cuid()) @id
   createdAt  DateTime  @default(now())
   updatedAt  DateTime? @updatedAt
-  email      String    
+  email      String
   phone      String?
   firstName  String?
   lastName   String?
   roleId     String
```


