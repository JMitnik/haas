{
    "private": true,
    "jest": {
        "verbose": true
    },
    "homepage": ".",
    "workspaces": {
        "packages": [
            "api",
            "frontend/dashboard",
            "frontend/ui",
            "frontend/client"
        ],
        "nohoist": [
            "frontend/client/webpack-dev-server",
            "frontend/client/react-scripts-server",
            "frontend/dashboard/webpack-dev-server",
            "**/babel-loader",
            "**/babel-jest"
        ]
    },
    "resolutions": {
        "**/@typescript-eslint/eslint-plugin": "^4.1.1",
        "**/@typescript-eslint/parser": "^4.1.1",
        "jest-environment-jsdom": "^26.0.1"
    },
    "scripts": {
        "aws:install": "cd aws/stack && yarn",
        "aws:deploy-pipeline": "cd aws/stack && cdk deploy haasSvcPipeline --profile haas-prod",
        "aws:deploy:campaign": "cd aws/commands && bash deploy-campaign.bash",
        "aws:deploy:internal": "cd aws/stack && cdk deploy InternalNotifyStack --profile haas-prod",
        "start": "concurrently \"yarn start:client\" \"yarn start:dashboard\" \"yarn start:api\"",
        "start:api": "yarn workspace @haas/api start",
        "start:api-debug": "yarn workspace @haas/api start:debug",
        "start:client": "yarn workspace @haas/client start",
        "start:dashboard": "yarn workspace @haas/dashboard start",
        "deploy:aws:campaign": "cd aws/commands && bash deploy-campaign.bash",
        "deploy:api:staging": "bash aws/stack/scripts/update_ecs.sh",
        "dock:up": "cd container/api && docker-compose up -d",
        "dock:down": "cd container/api && docker-compose down",
        "dock:test": "bash scripts/dock-test.sh",
        "dock:up:test": "(cd container/test && docker-compose up -d) && sleep 10 && (export DB_STRING=postgresql://prisma:prisma@localhost:5431/postgres?schema=public && yarn migrate)",
        "dock:restart:test": "yarn dock:down:test && yarn dock:up:test",
        "dock:down:test": "(cd container/test && docker-compose down)",
        "dev": "concurrently \"yarn start:client\" \"yarn start:dashboard\" \"yarn dev:api\"",
        "dev:api": "yarn workspace @haas/api dev",
        "build:client": "yarn workspace @haas/client build",
        "build:api": "yarn workspace @haas/api generate && yarn workspace @haas/api build",
        "clean": "yarn clean:cache && yarn clean:npm",
        "clean:cache": "yarn cache clean",
        "clean:npm": "find . -name 'node_modules' -type d -prune -exec rm -rf '{}' +",
        "deploy:ecs:staging": "bash aws/stack/scripts/update_ecs_staging.sh",
        "deploy:ecs:prod": "bash aws/stack/scripts/update_ecs_prod.sh",
        "deploy:aws-temp:prod": "(cd aws/stack && cdk deploy ProdCoreTemp --profile haas-prod)",
        "deploy:aws-fixed:prod": "(cd aws/stack && cdk deploy ProdCoreFixed --profile haas-prod)",
        "eslint": "yarn eslint:client",
        "eslint:api": "yarn workspace @haas/api eslint",
        "eslint:client": "yarn workspace @haas/client eslint",
        "eslint:dashboard": "yarn workspace @haas/dashboard eslint",
        "dev:prep": "yarn && yarn migrate && yarn seed:basic && yarn gen",
        "gen": "bash scripts/generate.sh",
        "gen:api": "yarn workspace @haas/api gen",
        "gen:api:prisma": "yarn workspace @haas/api gen:prisma",
        "gen:dashboard": "yarn workspace @haas/dashboard gen",
        "gen:client": "yarn workspace @haas/client gen",
        "staging:migrate": "~/.config/yarn/global/node_modules/.bin/dotenv -e api/.env.staging -- yarn migrate",
        "db-seed-user": "yarn workspace @haas/api db-seed-user",
        "db-seed": "yarn workspace @haas/api db-seed",
        "db-connect-bastion:prod": "bash aws/stack/scripts/connect_to_bastion_prod.sh",
        "db-migrate-create": "yarn workspace @haas/api db-migrate-create",
        "db-migrate:dev": "yarn workspace @haas/api migrate",
        "db-migrate:staging": "~/.config/yarn/global/node_modules/.bin/dotenv -e api/.env.staging -- yarn workspace @haas/api db-migrate:staging",
        "db-migrate:prod": "~/.config/yarn/global/node_modules/.bin/dotenv -e api/.env.prod -- yarn workspace @haas/api db-migrate:prod",
        "migrate": "yarn workspace @haas/api migrate",
        "migrate:baseline": "yarn workspace @haas/api migrate:baseline",
        "migrate:create": "yarn workspace @haas/api migrate:create",
        "seed:api": "yarn workspace @haas/api seed",
        "install:dashboard": "yarn workspace @haas/dashboard add",
        "kill": "yarn kill:api && yarn kill:client",
        "kill:dashboard": "yarn workspace @haas/dashboard kill",
        "kill:api": "yarn workspace @haas/api kill",
        "kill:client": "kill $(lsof -t -i:3000) | exit 0",
        "test": "yarn workspace @haas/api test",
        "test:integration:api": "yarn workspace @haas/api test:integration",
        "test:integration:dashboard": "yarn workspace @haas/dashboard test:integration",
        "test:watch:api": "yarn workspace @haas/api test:watch",
        "test:watch:dashboard": "yarn workspace @haas/dashboard test:watch",
        "test:dashboard": "yarn workspace @haas/dashboard test",
        "test:cypress-dashboard": "yarn workspace @haas/dashboard cypress open",
        "test-e2e:client": "yarn workspace @haas/client cypress open",
        "test-e2e-ci:client": "yarn workspace @haas/client cypress run",
        "restart:api": "yarn kill:api && yarn start:api",
        "types": "yarn types:api && yarn types:dashboard && yarn types:client",
        "types:api": "yarn workspace @haas/api types",
        "types:client": "yarn workspace @haas/client types",
        "types:dashboard": "yarn workspace @haas/dashboard types",
        "seed:basic": "yarn workspace @haas/api seed:basic",
        "tunnel:api": "ngrok http https://localhost:4000"
    },
    "devDependencies": {
        "concurrently": "^5.1.0",
        "eslint": "^7.25.0",
        "@typescript-eslint/eslint-plugin": "^4.22.1",
        "@typescript-eslint/parser": "^4.22.1",
        "eslint-config-airbnb": "^18.2.1",
        "eslint-config-airbnb-typescript": "12.3.1",
        "eslint-plugin-jsx-a11y": "6.4.1",
        "eslint-import-resolver-typescript": "^2.4.0",
        "eslint-plugin-import": "2.22.1",
        "eslint-plugin-react": "^7.23.2",
        "eslint-plugin-react-hooks": "^4.2.0",
        "eslint-plugin-sort-imports-es6-autofix": "^0.6.0"
    },
    "dependencies": {}
}
